<html><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>Lilac </title>

    <script language="JavaScript" type="text/javascript" src="Lilac_files/chance.js"></script>
    <script language="JavaScript" type="text/javascript" src="Lilac_files/util.js"></script>
    <script language="JavaScript" type="text/javascript" src="Lilac_files/curve.js"></script>
    <script language="JavaScript" type="text/javascript" src="Lilac_files/aes.js"></script>
    <script language="JavaScript" type="text/javascript" src="Lilac_files/jsonformatter.js"></script>
    <script language="JavaScript" type="text/javascript" src="Lilac_files/bigInteger.js"></script>
    <script src="Lilac_files/socket.js"></script>
    <script language="JavaScript" type="text/javascript" src="Lilac_files/jquery_002.js"></script>
    <script language="JavaScript" type="text/javascript" src="Lilac_files/encryption.js"></script>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script language="JavaScript" type="text/javascript" src="Lilac_files/jquery_002.js"></script>
	<script language="JavaScript" type="text/javascript" src="Lilac_files/bootstrap.js"></script>
	<link rel="stylesheet" href="Lilac_files/bootstrap.css">
	<link rel="stylesheet/less" type="text/css" href="http://localhost:8060/main.css"><style id="less:main" type="text/css">body {
  margin: 0;
  background-color: #C7C7CC;
  overflow: hidden;
  overflow-y: auto;
}
.row {
  margin-top: 40px;
  position: auto;
}
.main-container {
  background-color: white;
  margin: 40px 15%;
  width: 70%;
  top: 70px;
  bottom: 20px;
  position: absolute;
}
.containermenu {
  background-color: #898c90;
  width: 100%;
  margin-left: 205px;
  position: fixed;
}
.users {
  height: 100%;
  background-color: transparent;
  width: 100%;
  overflow: scroll;
  overflow: hidden;
  overflow-y: auto;
}
.conversation {
  margin-top: 10px;
  margin-bottom: 10px;
  background-color: transparent;
  font: "Helvetica Neue", Helvetica, Arial, sans-serif;
  color: white;
}
.element {
  margin-left: 15%;
  margin-right: 15%;
  width: 70%;
}
.colTwelve {
  width: 100%;
  height: 100%;
  float: left;
  position: relative;
}
.colNine {
  width: 75%;
  float: left;
  height: 100%;
  position: relative;
}
.colThree {
  width: 25%;
  float: left;
  height: 100%;
  position: relative;
  background-color: #8e8e93;
}
.chat_container {
  top: 10%;
  bottom: 15%;
  position: absolute;
  width: 100%;
  background-color: transparent;
  overflow: auto;
}
.chat_table {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 5%;
  max-height: 10%;
  min-height: 1em;
}
.typing_container {
  background-color: transparent;
  min-height: 1em;
  height: 5%;
  max-height: 5%;
  position: absolute;
  bottom: 0;
}
#typing {
  background-color: transparent;
  margin-left: 10%;
  color: green;
}
.footer {
  background-color: #34AADC;
  color: white;
  position: absolute;
  bottom: 0;
}
blockquote {
  margin: 0 auto;
  max-width: 320px;
}
p {
  margin: 0 10% 0.8em;
  border-radius: 1em;
  padding: 0.5em 1em;
  background: #0bd318;
  max-width: 75%;
  clear: both;
  position: relative;
  word-wrap: break-word;
}
p.them {
  float: left;
  color: white;
}
p.them::after {
  content: "";
  position: absolute;
  left: -0.5em;
  bottom: 0;
  width: 0.5em;
  height: 1em;
  border-right: 0.5em solid #0bd318;
  border-bottom-right-radius: 1em 0.5em;
  box-sizing: unset;
}
p.me {
  float: right;
  background-color: #1289fe;
  color: white;
}
p.me::after {
  content: "";
  position: absolute;
  right: -0.5em;
  bottom: 0;
  width: 0.5em;
  height: 1em;
  border-left: 0.5em solid #1289fe;
  border-bottom-left-radius: 1em 0.5em;
  box-sizing: unset;
}
/* Menu */
#custom-bootstrap-menu.navbar-default .navbar-brand {
  color: #f0dfdf;
}
#custom-bootstrap-menu.navbar-default {
  font-size: 17px;
  background-color: #34aadc;
  background: -webkit-linear-gradient(top, #5ac8fb 0%, #34aadc 100%);
  background: linear-gradient(to bottom, #5ac8fb 0%, #34aadc 100%);
  border-width: 2px;
  border-radius: 7px;
  height: 78px;
  width: 70%;
  margin-left: 15%;
  margin-right: 15%;
}
#custom-bootstrap-menu.navbar-default .navbar-nav > li > a {
  color: #fafafa;
  background-color: #34aadc;
  background: -webkit-linear-gradient(top, #5ac8fb 0%, #34aadc 100%);
  background: linear-gradient(to bottom, #5ac8fb 0%, #34aadc 100%);
}
#custom-bootstrap-menu.navbar-default .navbar-nav > li > a:hover,
#custom-bootstrap-menu.navbar-default .navbar-nav > li > a:focus {
  color: #e7edf0;
  background-color: #e03636;
}
#custom-bootstrap-menu.navbar-default .navbar-nav > .active > a,
#custom-bootstrap-menu.navbar-default .navbar-nav > .active > a:hover,
#custom-bootstrap-menu.navbar-default .navbar-nav > .active > a:focus {
  color: #382121;
  background-color: #33804d;
}
#custom-bootstrap-menu.navbar-default .navbar-toggle {
  border-color: #33804d;
}
#custom-bootstrap-menu.navbar-default .navbar-toggle:hover,
#custom-bootstrap-menu.navbar-default .navbar-toggle:focus {
  background-color: #33804d;
}
#custom-bootstrap-menu.navbar-default .navbar-toggle .icon-bar {
  background-color: #33804d;
}
#custom-bootstrap-menu.navbar-default .navbar-toggle:hover .icon-bar,
#custom-bootstrap-menu.navbar-default .navbar-toggle:focus .icon-bar {
  background-color: #34aadc;
}
/*///////////////////////////////////////////////////////////////////////////*/
</style>
	<link rel="stylesheet" href="Lilac_files/demo.css">
	<script language="JavaScript" type="text/javascript" src="Lilac_files/less.js"></script>
	<script language="JavaScript" type="text/javascript" src="Lilac_files/jquery.js"></script>

	<script>
		var tagWhitelist_ = {
			'A': true,
			'B': true,
			'BODY': true,
			'BR': true,
			'DIV': true,
			'EM': true,
			'HR': true,
			'I': true,
			'IMG': true,
			'P': true,
			'SPAN': true,
			'STRONG': true
		};
		var attributeWhitelist_ = {
			'href': true,
			'src': true
		};

		function sanitizeHtml(input) {
			var iframe = document.createElement('iframe');
			if (iframe['sandbox'] === undefined) {
				alert('Your browser does not support sandboxed iframes. Please upgrade to a modern browser.');
				return '';
			}
			iframe['sandbox'] = 'allow-same-origin';
			iframe.style.display = 'none';
			document.body.appendChild(iframe); // necessary so the iframe contains a document
			iframe.contentDocument.body.innerHTML = input;

			function makeSanitizedCopy(node) {
				if (node.nodeType == Node.TEXT_NODE) {
					var newNode = node.cloneNode(true);
				} else if (node.nodeType == Node.ELEMENT_NODE && tagWhitelist_[node.tagName]) {
					newNode = iframe.contentDocument.createElement(node.tagName);
					for (var i = 0; i < node.attributes.length; i++) {
						var attr = node.attributes[i];
						if (attributeWhitelist_[attr.name]) {
							newNode.setAttribute(attr.name, attr.value);
						}
					}
					for (i = 0; i < node.childNodes.length; i++) {
						var subCopy = makeSanitizedCopy(node.childNodes[i]);
						newNode.appendChild(subCopy, false);
					}
				} else {
					newNode = document.createDocumentFragment();
				}
				return newNode;
			};
			resultElement = makeSanitizedCopy(iframe.contentDocument.body);
			document.body.removeChild(iframe);
			return resultElement.innerHTML;
			alert(resultElement);
			resultElement = msg;
		};

		/*function scrollDown(div) {
			div.animate({
				scrollTop: 10000
			}, "slow");
		}*/

		$(document).ready(function() {
			$('#myModal').modal({
				show: true,
				keyboard: false
			})
    		$("#logoutButton").hide();
    		//$("#get_chat_partner").hide();
    		//$("#conversation").hide();
    		//$("#waiting").hide();
    		$("#typing").hide();
    		disableChat();
    		$('#chat_body').slimScroll({
				color: '#87FC70',
				height: '100%',
				width: '100%',
				start: 'bottom',
				disableFadeOut: true,
				size: '10px',
				wheelStep: 1,
			});
    		var username;
    		var uname;
			var client;
			var nodes;
			var creds;
			var sessionIDs = [];
			var clientkeyx1;
			var clientkeyx2;
			var gx1;
			var gx2;
			var chat_key;
			var connected = false;
			var typing = false;
			
			buildCircuit();
			
			function get_key_pair()
			{
				var privKey = chance.string(
				{
					length: 64,
					pool: '0123456789abcdef'
				});
				var pubKey = straight_hex(curve25519_to8bitString(curve25519(curve25519_from8bitString(h2s(privKey)), curve25519_nine())));
				var key_pair = {
					privateKey: privKey,
					publicKey: pubKey,
				};
				return key_pair;
			}

			function get_creds()
			{
				var creds = [];
				$.ajax(
				{
					url: 'creds.json',
					dataType: 'json',
					async: false,
					success: function(data)
					{
						$.each(data, function(i, f)
						{
						    console.log(f);
						    var cred = {
						        name: f.name,
						        host: f.host,
						        port: f.port,
						        publicKey: f.publicKey
						    };
						    creds.push(cred);
						});
					}
				});
				console.log("Creds in function");
				console.log(creds);
				return creds;
			}
			
			/*

			Registering Presence

			*/
			
			function register_presence()
			{
				console.log(username);
				var msg = encryptThrice(username, sessionIDs);
				console.log("Registering presence.");
				client.emit('register presence', {username: msg});
				client.on('presence registered', function ()
				{
					console.log("Presence registered.");
					//$("#get_username").hide();
					//$("#get_chat_partner").show();
					$("#logoutButton").show();
				});
				client.on('username taken', function ()
				{
					alert("Username Taken!");
					$('#myModal').modal({
						show: true,
						keyboard: false
					})
				});
			}
			
			/*
			
			Request Connection
			
			*/
			
			function connect_to_user(uname)
			{
				console.log("Connecting to " + uname + ".");
				var msg = encryptThrice(uname, sessionIDs);
				client.emit('request connection', {username: msg, gb: gx1, gy: gx2});
			}
			
			/*
			
			Send Message
			
			*/
			
			function sendMessage(msg)
			{
				typing = false;
				$("#sendMessage").prop("disabled",true);
				$("#chat_input").val('');
				addMessage(msg, "me");
				console.log("Sending Message: " + msg);
				var enc = encrypt(msg, chat_key);
				var enc_msg = encryptThrice(enc, sessionIDs);
				client.emit("send message",{msg: enc_msg});
			}
			
			/*
			
			End Conversation
			
			*/
			
			function endConversation()
			{
				disableChat();
				console.log("Ending Conversation");
				client.emit("end conversation");
				uname = "";
				connected = false;
				typing = false;
				$("#typing").hide();
				$("#chat_body").text('<center style="color: gray;">Search for a partner to begin a conversation</center>');
				$("#chat_input").text("");
			}
			
			/*
			
			Logout
			
			*/
			
			function logout()
			{
				if (connected)
					endConversation();
				console.log("Logging out.");
				if (client)
					client.disconnect();
				$("#logoutButton").hide();
				buildCircuit();
				$('#myModal').modal({
					show: true,
					keyboard: false
				})
			}
			
			/*
			
			Typing
			
			*/
			
			function isTyping()
			{
				if ($("#chat_input").val() == '')
				{
					if (typing)
					{
						client.emit("typing", {typing: false});
						$("#sendMessage").prop("disabled",true);
					}
					typing = false;
				}
				else
				{
					if(!(typing))
					{
						client.emit("typing", {typing: true});
						$("#sendMessage").prop("disabled",false);
					}
					typing = true;
				}
			}
			
			/*

			Disable chat
			
			*/
			
			function disableChat()
			{
				$("#chat_header_bar").hide();
				$("#chat_input").prop('disabled', true);
				$("#sendMessage").prop("disabled",true);
				$(".chat_table").hide();
			}
			
			/*

			Enable chat
			
			*/
			
			function enableChat()
			{
				$("#chat_header_bar").show();
				$("#chat_input").prop('disabled', false);
				$("#sendMessage").prop("disabled",false);
				$(".chat_table").show();
			}
			
			/*
			
			Add message to chat_body
			
			*/
			
			function addMessage(msg, msgClass)
			{
				$("#chat_body").append('<p class='+msgClass+'>' + msg + '</p>');
				var scrollTo_val = $('#chat_body').prop('scrollHeight') + 'px';
				$("#chat_body").slimScroll({scrollTo: scrollTo_val});
			}
			
			/*
			
			Build Circuit Code
			
			*/
			
			function buildCircuit()
			{
				nodes = [0,1,2];//[Math.floor(Math.random() * 6), Math.floor(Math.random() * 6), Math.floor(Math.random() * 6)];
				creds = get_creds();
				clientkeyx1 = get_key_pair();
				clientkeyx2 = get_key_pair();
				gx1 = clientkeyx1.publicKey;
				gx2 = clientkeyx2.publicKey;
				//console.log("GX1 " + gx1);
				//console.log("GX2 " + gx2);
				//console.log("Connecting to first node: " + nodes[0]);
				client = io.connect('http://' + creds[nodes[0]].host + ':' + creds[nodes[0]].port,
				{
					'forceNew': true,
					'reconnect': true
				});
				client.emit("gx",
				{
					gx1: gx1,
					gx2: gx2,
					pid: null,
					client: true
				});
				client.on('gy', function(data)
				{
					var gy = data.gy;
					var gb = creds[nodes[0]].publicKey;
					//console.log("Server public key gb: " + gb);
					//console.log("Server ephemeral key: " + gy);
					var csecret1 = straight_hex(curve25519_to8bitString(curve25519(curve25519_from8bitString(h2s(clientkeyx1.privateKey)), curve25519_from8bitString(h2s(gb)))));
					var csecret2 = straight_hex(curve25519_to8bitString(curve25519(curve25519_from8bitString(h2s(clientkeyx2.privateKey)), curve25519_from8bitString(h2s(gy)))));
					//console.log("ephemeral key g^b(x1): " + csecret1);
					//console.log("ephemeral key g^y(x2): " + csecret2);
					var cfinal = (bigInt(csecret1, 16)).multiply(bigInt(csecret2, 16));
					//console.log("secret on client side: " + cfinal);
					var estsechash = cfinal.toString(16);
					var sessionid = estsechash;
					//console.log("Session ID on client side: " + sessionid);
					sessionIDs[0] = sessionid;
		
					/*
		
					Connecting to second node
		
					*/
		
					//console.log("Connecting to second node: " + nodes[1]);
					//console.log(creds[nodes[1]].host + ":" + creds[nodes[1]].port);
					var nodeAddress = "http://" + creds[nodes[1]].host + ":" + creds[nodes[1]].port;
					client.emit('next-node',
					{
						address: nodeAddress
					});
				});
				client.on('next-node-connected', function(data)
				{
					//console.log("Connected to second node");
					client.emit("gx-node2",
					{
						gx1: gx1,
						gx2: gx2
					});
				});
				client.on('gy-node2', function(data)
				{
					var gy = data.gy;
					var gb = creds[nodes[1]].publicKey;
					//console.log("Server public key gb: " + gb);
					//console.log("Server ephemeral key: " + gy);
					var csecret1 = straight_hex(curve25519_to8bitString(curve25519(curve25519_from8bitString(h2s(clientkeyx1.privateKey)), curve25519_from8bitString(h2s(gb)))));
					var csecret2 = straight_hex(curve25519_to8bitString(curve25519(curve25519_from8bitString(h2s(clientkeyx2.privateKey)), curve25519_from8bitString(h2s(gy)))));
					//console.log("ephemeral key g^b(x1): " + csecret1);
					//console.log("ephemeral key g^y(x2): " + csecret2);
					var cfinal = (bigInt(csecret1, 16)).multiply(bigInt(csecret2, 16));
					//console.log("secret on client side: " + cfinal);
					var estsechash = cfinal.toString(16);
					var sessionid = estsechash;
					//console.log("NODE 2 Session ID on client side: " + sessionid);
					sessionIDs[1] = sessionid;
		
					/*
		
					Connecting to third node
		
					*/
		
					//console.log("Connecting to third node: " + nodes[2]);
					//console.log(creds[nodes[2]].host + ":" + creds[nodes[2]].port);
					var nodeAddress = "http://" + creds[nodes[2]].host + ":" + creds[nodes[2]].port;
					client.emit('next-next-node',
					{
						address: nodeAddress
					});
				});
				client.on('next-next-node-connected', function(data)
				{
					client.emit("gx-node3",
					{
						gx1: gx1,
						gx2: gx2
					});
				});
				client.on('gx1-node3 received', function(data)
				{
					client.emit("gx2-node3",
					{
						gx2: gx2
					});
				});
				client.on('gy-node3', function(data)
				{
					var gy = data.gy;
					var gb = creds[nodes[2]].publicKey;
					//console.log("Server public key gy: " + gy);
					//console.log("Server ephemeral key: " + gb);
					var csecret1 = straight_hex(curve25519_to8bitString(curve25519(curve25519_from8bitString(h2s(clientkeyx1.privateKey)), curve25519_from8bitString(h2s(gb)))));
					var csecret2 = straight_hex(curve25519_to8bitString(curve25519(curve25519_from8bitString(h2s(clientkeyx2.privateKey)), curve25519_from8bitString(h2s(gy)))));
					//console.log("ephemeral key g^b(x1): " + csecret1);
					//console.log("ephemeral key g^y(x2): " + csecret2);
					var cfinal = (bigInt(csecret1, 16)).multiply(bigInt(csecret2, 16));
					//console.log("secret on client side: " + cfinal);
					var estsechash = cfinal.toString(16);
					var sessionid = estsechash;
					//console.log("NODE 3 Session ID on client side: " + sessionid);
					sessionIDs[2] = sessionid;
				});
				client.on('connection requested', function (data)
				{
					uname = decryptThrice(data.username, sessionIDs);					
					//console.log("Connection from " + uname + ".");
					
					/*
					
					Ask user to accept/decline connection
					
					*/
					if (connected)
						endConversation();
					client.emit("start chat",
					{
						gb : gx1,
						gy: gx2,
						address : data.address,
						pid : data.Xpid
					});
				
					connected = true;
					var gb = data.gb;
					var gy = data.gy;
					var csecret1 = straight_hex(curve25519_to8bitString(curve25519(curve25519_from8bitString(h2s(clientkeyx1.privateKey)), curve25519_from8bitString(h2s(gb)))));
					var csecret2 = straight_hex(curve25519_to8bitString(curve25519(curve25519_from8bitString(h2s(clientkeyx2.privateKey)), curve25519_from8bitString(h2s(gy)))));
					//console.log("ephemeral key g^b(x1): " + csecret1);
					//console.log("ephemeral key g^y(x2): " + csecret2);
					var cfinal = (bigInt(csecret1, 16)).multiply(bigInt(csecret2, 16));
					//console.log("secret on client side: " + cfinal);
					chat_key = cfinal.toString(16);
					//console.log("Chat key: " + chat_key);
					//$("#get_username").hide();
					//$("#get_chat_partner").hide();
					//$("#waiting").hide();
					$("#chat_header").text("Chat with: " + uname);
					$("#chat_body").append("<center style='color:gray'>Connected to "+uname+"</center>");
					$("#typing").text(uname+" is typing...");
					//$("#conversation").show();
					enableChat();
					$("#sendMessage").prop("disabled",true);
				});
				client.on("connection accepted", function (data)
				{
					console.log("connection accepted");
					var gb = data.gb;
					var gy = data.gy;
					var csecret1 = straight_hex(curve25519_to8bitString(curve25519(curve25519_from8bitString(h2s(clientkeyx1.privateKey)), curve25519_from8bitString(h2s(gb)))));
					var csecret2 = straight_hex(curve25519_to8bitString(curve25519(curve25519_from8bitString(h2s(clientkeyx2.privateKey)), curve25519_from8bitString(h2s(gy)))));
					//console.log("ephemeral key g^b(x1): " + csecret1);
					//console.log("ephemeral key g^y(x2): " + csecret2);
					var cfinal = (bigInt(csecret1, 16)).multiply(bigInt(csecret2, 16));
					//console.log("secret on client side: " + cfinal);
					chat_key = cfinal.toString(16);
					//console.log("Chat key: " + chat_key);
				
					connected = true;
					//$("#waiting").hide();
					$("#chat_header").text("Chat with: " + uname);
					$("#chat_body").append("<center style='color:gray'>Connected to "+uname+"</center>");
					$("#typing").text(uname+" is typing");
					//$("#conversation").show();
					enableChat();
					$("#sendMessage").prop("disabled",true);
				});
				client.on("receive message", function (data)
				{
					var enc_msg = decryptThrice(data.msg, sessionIDs);
					var msg = decrypt(enc_msg, chat_key);
					addMessage(msg, "them");
					$("#typing").hide();
				});
				client.on("conversation ended", function ()
				{
					alert("Conversation with " + uname + " ended.");
					endConversation();
					//$("#conversation").hide();
					//$("#get_chat_partner").show();
				});
				client.on("partner typing", function(data)
				{
					console.log("partner typing " + data.typing);
					if (data.typing)
						$("#typing").show();
					else
						$("#typing").hide();
				});
				client.on('disconnect', function(data)
				{
					alert("Connection Lost");
					logout();
				});
			}
			$("#usernameButton").click(function(){
				username = sanitizeHtml(document.getElementById('username').value);
				if (username != '') {
					$('#myModal').modal('hide');
					$("#username").val('');
					register_presence();
				} else {
					alert("Enter a valid username to continue");
				}
			});
			$("#partnerButton").click(function(){
				if (connected)
					endConversation();
				uname = sanitizeHtml($("#partner_username").val());
				if (uname != ''){
					$("#partner_username").val('');
					connect_to_user(uname);
					$("#chat_body").append("<center style='color:gray'>Waiting for "+uname+"</center>");
				}
				//$("#get_chat_partner").hide();
				//$("#waiting").show();
			});
			$("#sendMessage").click(function(){
				var msg = sanitizeHtml($("#chat_input").val());
				sendMessage(msg);
			});
			$("#endConversation").click(function(){
				endConversation();
				//$("#conversation").hide();
				//$("#get_chat_partner").show();
			});
			$('#logoutButton').click(function(){
				logout();
				//$("#conversation").hide();
				//$("#get_chat_partner").hide();
				//$("#get_username").show();
			});
			$('#chat_input').on('input', function() {
				isTyping();
			});
    	});        
    </script>

<style class="firebugResetStyles" type="text/css" charset="utf-8">/* See license.txt for terms of usage */
/** reset styling **/
.firebugResetStyles {
    z-index: 2147483646 !important;
    top: 0 !important;
    left: 0 !important;
    display: block !important;
    border: 0 none !important;
    margin: 0 !important;
    padding: 0 !important;
    outline: 0 !important;
    min-width: 0 !important;
    max-width: none !important;
    min-height: 0 !important;
    max-height: none !important;
    position: fixed !important;
    transform: rotate(0deg) !important;
    transform-origin: 50% 50% !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    background: transparent none !important;
    pointer-events: none !important;
    white-space: normal !important;
}
style.firebugResetStyles {
    display: none !important;
}

.firebugBlockBackgroundColor {
    background-color: transparent !important;
}

.firebugResetStyles:before, .firebugResetStyles:after {
    content: "" !important;
}
/**actual styling to be modified by firebug theme**/
.firebugCanvas {
    display: none !important;
}

/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
.firebugLayoutBox {
    width: auto !important;
    position: static !important;
}

.firebugLayoutBoxOffset {
    opacity: 0.8 !important;
    position: fixed !important;
}

.firebugLayoutLine {
    opacity: 0.4 !important;
    background-color: #000000 !important;
}

.firebugLayoutLineLeft, .firebugLayoutLineRight {
    width: 1px !important;
    height: 100% !important;
}

.firebugLayoutLineTop, .firebugLayoutLineBottom {
    width: 100% !important;
    height: 1px !important;
}

.firebugLayoutLineTop {
    margin-top: -1px !important;
    border-top: 1px solid #999999 !important;
}

.firebugLayoutLineRight {
    border-right: 1px solid #999999 !important;
}

.firebugLayoutLineBottom {
    border-bottom: 1px solid #999999 !important;
}

.firebugLayoutLineLeft {
    margin-left: -1px !important;
    border-left: 1px solid #999999 !important;
}

/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
.firebugLayoutBoxParent {
    border-top: 0 none !important;
    border-right: 1px dashed #E00 !important;
    border-bottom: 1px dashed #E00 !important;
    border-left: 0 none !important;
    position: fixed !important;
    width: auto !important;
}

.firebugRuler{
    position: absolute !important;
}

.firebugRulerH {
    top: -15px !important;
    left: 0 !important;
    width: 100% !important;
    height: 14px !important;
    background: url("data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%13%88%00%00%00%0E%08%02%00%00%00L%25a%0A%00%00%00%04gAMA%00%00%D6%D8%D4OX2%00%00%00%19tEXtSoftware%00Adobe%20ImageReadyq%C9e%3C%00%00%04%F8IDATx%DA%EC%DD%D1n%E2%3A%00E%D1%80%F8%FF%EF%E2%AF2%95%D0D4%0E%C1%14%B0%8Fa-%E9%3E%CC%9C%87n%B9%81%A6W0%1C%A6i%9A%E7y%0As8%1CT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AATE9%FE%FCw%3E%9F%AF%2B%2F%BA%97%FDT%1D~K(%5C%9D%D5%EA%1B%5C%86%B5%A9%BDU%B5y%80%ED%AB*%03%FAV9%AB%E1%CEj%E7%82%EF%FB%18%BC%AEJ8%AB%FA'%D2%BEU9%D7U%ECc0%E1%A2r%5DynwVi%CFW%7F%BB%17%7Dy%EACU%CD%0E%F0%FA%3BX%FEbV%FEM%9B%2B%AD%BE%AA%E5%95v%AB%AA%E3E5%DCu%15rV9%07%B5%7F%B5w%FCm%BA%BE%AA%FBY%3D%14%F0%EE%C7%60%0EU%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5JU%88%D3%F5%1F%AE%DF%3B%1B%F2%3E%DAUCNa%F92%D02%AC%7Dm%F9%3A%D4%F2%8B6%AE*%BF%5C%C2Ym~9g5%D0Y%95%17%7C%C8c%B0%7C%18%26%9CU%CD%13i%F7%AA%90%B3Z%7D%95%B4%C7%60%E6E%B5%BC%05%B4%FBY%95U%9E%DB%FD%1C%FC%E0%9F%83%7F%BE%17%7DkjMU%E3%03%AC%7CWj%DF%83%9An%BCG%AE%F1%95%96yQ%0Dq%5Dy%00%3Et%B5'%FC6%5DS%95pV%95%01%81%FF'%07%00%00%00%00%00%00%00%00%00%F8x%C7%F0%BE%9COp%5D%C9%7C%AD%E7%E6%EBV%FB%1E%E0(%07%E5%AC%C6%3A%ABi%9C%8F%C6%0E9%AB%C0'%D2%8E%9F%F99%D0E%B5%99%14%F5%0D%CD%7F%24%C6%DEH%B8%E9rV%DFs%DB%D0%F7%00k%FE%1D%84%84%83J%B8%E3%BA%FB%EF%20%84%1C%D7%AD%B0%8E%D7U%C8Y%05%1E%D4t%EF%AD%95Q%BF8w%BF%E9%0A%BF%EB%03%00%00%00%00%00%00%00%00%00%B8vJ%8E%BB%F5%B1u%8Cx%80%E1o%5E%CA9%AB%CB%CB%8E%03%DF%1D%B7T%25%9C%D5(%EFJM8%AB%CC'%D2%B2*%A4s%E7c6%FB%3E%FA%A2%1E%80~%0E%3E%DA%10x%5D%95Uig%15u%15%ED%7C%14%B6%87%A1%3B%FCo8%A8%D8o%D3%ADO%01%EDx%83%1A~%1B%9FpP%A3%DC%C6'%9C%95gK%00%00%00%00%00%00%00%00%00%20%D9%C9%11%D0%C0%40%AF%3F%EE%EE%92%94%D6%16X%B5%BCMH%15%2F%BF%D4%A7%C87%F1%8E%F2%81%AE%AAvzr%DA2%ABV%17%7C%E63%83%E7I%DC%C6%0Bs%1B%EF6%1E%00%00%00%00%00%00%00%00%00%80cr%9CW%FF%7F%C6%01%0E%F1%CE%A5%84%B3%CA%BC%E0%CB%AA%84%CE%F9%BF)%EC%13%08WU%AE%AB%B1%AE%2BO%EC%8E%CBYe%FE%8CN%ABr%5Dy%60~%CFA%0D%F4%AE%D4%BE%C75%CA%EDVB%EA(%B7%F1%09g%E5%D9%12%00%00%00%00%00%00%00%00%00H%F6%EB%13S%E7y%5E%5E%FB%98%F0%22%D1%B2'%A7%F0%92%B1%BC%24z3%AC%7Dm%60%D5%92%B4%7CEUO%5E%F0%AA*%3BU%B9%AE%3E%A0j%94%07%A0%C7%A0%AB%FD%B5%3F%A0%F7%03T%3Dy%D7%F7%D6%D4%C0%AAU%D2%E6%DFt%3F%A8%CC%AA%F2%86%B9%D7%F5%1F%18%E6%01%F8%CC%D5%9E%F0%F3z%88%AA%90%EF%20%00%00%00%00%00%00%00%00%00%C0%A6%D3%EA%CFi%AFb%2C%7BB%0A%2B%C3%1A%D7%06V%D5%07%A8r%5D%3D%D9%A6%CAu%F5%25%CF%A2%99%97zNX%60%95%AB%5DUZ%D5%FBR%03%AB%1C%D4k%9F%3F%BB%5C%FF%81a%AE%AB'%7F%F3%EA%FE%F3z%94%AA%D8%DF%5B%01%00%00%00%00%00%00%00%00%00%8E%FB%F3%F2%B1%1B%8DWU%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*UiU%C7%BBe%E7%F3%B9%CB%AAJ%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5*%AAj%FD%C6%D4%5Eo%90%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5%86%AF%1B%9F%98%DA%EBm%BBV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%AD%D6%E4%F58%01%00%00%00%00%00%00%00%00%00%00%00%00%00%40%85%7F%02%0C%008%C2%D0H%16j%8FX%00%00%00%00IEND%AEB%60%82") repeat-x !important;
    border-top: 1px solid #BBBBBB !important;
    border-right: 1px dashed #BBBBBB !important;
    border-bottom: 1px solid #000000 !important;
}

.firebugRulerV {
    top: 0 !important;
    left: -15px !important;
    width: 14px !important;
    height: 100% !important;
    background: url("data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%0E%00%00%13%88%08%02%00%00%00%0E%F5%CB%10%00%00%00%04gAMA%00%00%D6%D8%D4OX2%00%00%00%19tEXtSoftware%00Adobe%20ImageReadyq%C9e%3C%00%00%06~IDATx%DA%EC%DD%D1v%A20%14%40Qt%F1%FF%FF%E4%97%D9%07%3BT%19%92%DC%40(%90%EEy%9A5%CB%B6%E8%F6%9Ac%A4%CC0%84%FF%DC%9E%CF%E7%E3%F1%88%DE4%F8%5D%C7%9F%2F%BA%DD%5E%7FI%7D%F18%DDn%BA%C5%FB%DF%97%BFk%F2%10%FF%FD%B4%F2M%A7%FB%FD%FD%B3%22%07p%8F%3F%AE%E3%F4S%8A%8F%40%EEq%9D%BE8D%F0%0EY%A1Uq%B7%EA%1F%81%88V%E8X%3F%B4%CEy%B7h%D1%A2E%EBohU%FC%D9%AF2fO%8BBeD%BE%F7X%0C%97%A4%D6b7%2Ck%A5%12%E3%9B%60v%B7r%C7%1AI%8C%BD%2B%23r%00c0%B2v%9B%AD%CA%26%0C%1Ek%05A%FD%93%D0%2B%A1u%8B%16-%95q%5Ce%DCSO%8E%E4M%23%8B%F7%C2%FE%40%BB%BD%8C%FC%8A%B5V%EBu%40%F9%3B%A72%FA%AE%8C%D4%01%CC%B5%DA%13%9CB%AB%E2I%18%24%B0n%A9%0CZ*Ce%9C%A22%8E%D8NJ%1E%EB%FF%8F%AE%CAP%19*%C3%BAEKe%AC%D1%AAX%8C*%DEH%8F%C5W%A1e%AD%D4%B7%5C%5B%19%C5%DB%0D%EF%9F%19%1D%7B%5E%86%BD%0C%95%A12%AC%5B*%83%96%CAP%19%F62T%86%CAP%19*%83%96%CA%B8Xe%BC%FE)T%19%A1%17xg%7F%DA%CBP%19*%C3%BA%A52T%86%CAP%19%F62T%86%CA%B0n%A9%0CZ%1DV%C6%3D%F3%FCH%DE%B4%B8~%7F%5CZc%F1%D6%1F%AF%84%F9%0F6%E6%EBVt9%0E~%BEr%AF%23%B0%97%A12T%86%CAP%19%B4T%86%CA%B8Re%D8%CBP%19*%C3%BA%A52huX%19%AE%CA%E5%BC%0C%7B%19*CeX%B7h%A9%0C%95%E1%BC%0C%7B%19*CeX%B7T%06%AD%CB%5E%95%2B%BF.%8F%C5%97%D5%E4%7B%EE%82%D6%FB%CF-%9C%FD%B9%CF%3By%7B%19%F62T%86%CA%B0n%D1R%19*%A3%D3%CA%B0%97%A12T%86uKe%D0%EA%B02*%3F1%99%5DB%2B%A4%B5%F8%3A%7C%BA%2B%8Co%7D%5C%EDe%A8%0C%95a%DDR%19%B4T%C66%82fA%B2%ED%DA%9FC%FC%17GZ%06%C9%E1%B3%E5%2C%1A%9FoiB%EB%96%CA%A0%D5qe4%7B%7D%FD%85%F7%5B%ED_%E0s%07%F0k%951%ECr%0D%B5C%D7-g%D1%A8%0C%EB%96%CA%A0%A52T%C6)*%C3%5E%86%CAP%19%D6-%95A%EB*%95q%F8%BB%E3%F9%AB%F6%E21%ACZ%B7%22%B7%9B%3F%02%85%CB%A2%5B%B7%BA%5E%B7%9C%97%E1%BC%0C%EB%16-%95%A12z%AC%0C%BFc%A22T%86uKe%D0%EA%B02V%DD%AD%8A%2B%8CWhe%5E%AF%CF%F5%3B%26%CE%CBh%5C%19%CE%CB%B0%F3%A4%095%A1%CAP%19*Ce%A8%0C%3BO*Ce%A8%0C%95%A12%3A%AD%8C%0A%82%7B%F0v%1F%2FD%A9%5B%9F%EE%EA%26%AF%03%CA%DF9%7B%19*Ce%A8%0C%95%A12T%86%CA%B8Ze%D8%CBP%19*Ce%A8%0C%95%D1ae%EC%F7%89I%E1%B4%D7M%D7P%8BjU%5C%BB%3E%F2%20%D8%CBP%19*Ce%A8%0C%95%A12T%C6%D5*%C3%5E%86%CAP%19*Ce%B4O%07%7B%F0W%7Bw%1C%7C%1A%8C%B3%3B%D1%EE%AA%5C%D6-%EBV%83%80%5E%D0%CA%10%5CU%2BD%E07YU%86%CAP%19*%E3%9A%95%91%D9%A0%C8%AD%5B%EDv%9E%82%FFKOee%E4%8FUe%A8%0C%95%A12T%C6%1F%A9%8C%C8%3D%5B%A5%15%FD%14%22r%E7B%9F%17l%F8%BF%ED%EAf%2B%7F%CF%ECe%D8%CBP%19*Ce%A8%0C%95%E1%93~%7B%19%F62T%86%CAP%19*Ce%A8%0C%E7%13%DA%CBP%19*Ce%A8%0CZf%8B%16-Z%B4h%D1R%19f%8B%16-Z%B4h%D1R%19%B4%CC%16-Z%B4h%D1R%19%B4%CC%16-Z%B4h%D1%A2%A52%CC%16-Z%B4h%D1%A2%A52h%99-Z%B4h%D1%A2%A52h%99-Z%B4h%D1%A2EKe%98-Z%B4h%D1%A2EKe%D02%5B%B4h%D1%A2EKe%D02%5B%B4h%D1%A2E%8B%96%CA0%5B%B4h%D1%A2E%8B%96%CA%A0e%B6h%D1%A2E%8B%96%CA%A0e%B6h%D1%A2E%8B%16-%95a%B6h%D1%A2E%8B%16-%95A%CBl%D1%A2E%8B%16-%95A%CBl%D1%A2E%8B%16-Z*%C3l%D1%A2E%8B%16-Z*%83%96%D9%A2E%8B%16-Z*%83%96%D9%A2E%8B%16-Z%B4T%86%D9%A2E%8B%16-Z%B4T%06-%B3E%8B%16-Z%B4T%06-%B3E%8B%16-Z%B4h%A9%0C%B3E%8B%16-Z%B4h%A9%0CZf%8B%16-Z%B4h%A9%0CZf%8B%16-Z%B4h%D1R%19f%8B%16-Z%B4h%D1R%19%B4%CC%16-Z%B4h%D1R%19%B4%CC%16-Z%B4h%D1%A2%A52%CC%16-Z%B4h%D1%A2%A52h%99-Z%B4h%D1%A2%A52h%99-Z%B4h%D1%A2EKe%98-Z%B4h%D1%A2EKe%D02%5B%B4h%D1%A2EKe%D02%5B%B4h%D1%A2E%8B%96%CA0%5B%B4h%D1%A2E%8B%96%CA%A0e%B6h%D1%A2E%8B%96%CA%A0e%B6h%D1%A2E%8B%16-%95a%B6h%D1%A2E%8B%16-%95A%CBl%D1%A2E%8B%16-%95A%CBl%D1%A2E%8B%16-Z*%C3l%D1%A2E%8B%16-Z*%83%96%D9%A2E%8B%16-Z*%83%96%D9%A2E%8B%16-Z%B4T%86%D9%A2E%8B%16-Z%B4T%06-%B3E%8B%16-Z%B4T%06-%B3E%8B%16-Z%B4h%A9%0C%B3E%8B%16-Z%B4h%A9%0CZf%8B%16-Z%B4h%A9%0CZf%8B%16-Z%B4h%D1R%19f%8B%16-Z%B4h%D1R%19%B4%CC%16-Z%B4h%D1R%19%B4%CC%16-Z%B4h%D1%A2%A52%CC%16-Z%B4h%D1%A2%A52h%99-Z%B4h%D1%A2%A52h%99-Z%B4h%D1%A2EKe%98-Z%B4h%D1%A2EKe%D02%5B%B4h%D1%A2EKe%D02%5B%B4h%D1%A2E%8B%96%CA0%5B%B4h%D1%A2E%8B%96%CA%A0e%B6h%D1%A2E%8B%96%CA%A0e%B6h%D1%A2E%8B%16-%95a%B6h%D1%A2E%8B%16-%95A%CBl%D1%A2E%8B%16-%95A%CBl%D1%A2E%8B%16-Z*%C3l%D1%A2E%8B%16-Z*%83%96%D9%A2E%8B%16-Z*%83%96%D9%A2E%8B%16-Z%B4T%86%D9%A2E%8B%16-Z%B4T%06-%B3E%8B%16-Z%B4%AE%A4%F5%25%C0%00%DE%BF%5C'%0F%DA%B8q%00%00%00%00IEND%AEB%60%82") repeat-y !important;
    border-left: 1px solid #BBBBBB !important;
    border-right: 1px solid #000000 !important;
    border-bottom: 1px dashed #BBBBBB !important;
}

.overflowRulerX > .firebugRulerV {
    left: 0 !important;
}

.overflowRulerY > .firebugRulerH {
    top: 0 !important;
}

/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
.fbProxyElement {
    position: fixed !important;
    pointer-events: auto !important;
}
</style></head>

<!---body>
    <h1>Welcome to Lilac!</h1>
    <div id = "logout" align = "right">
    	<button id="logoutButton">Logout</button>
	</div>
    <div id = "get_username">
    	<p>Enter your username.</p>
    	<input id = "username" type="text" name="username"/>
    	<button id="usernameButton">Submit</button>
    </div>
    <div id = "get_chat_partner">
    	<p>Who would you like to chat with?</p>
    	<input id = "partner_username" type="text" name="partner_username"/>
    	<button id="partnerButton">Submit</button>
    </div>
    <div id = "waiting">
    	<p>Waiting for partner</p>
    </div>    
    <div id = "conversation" style="width:33%;">
    	<p id= "chat_header"></p>
    	<div id= "chat_body"></div>
    	<div id= "typing"></div>
    	<input id='chat_input' type="text"/>
    	<button id="sendMessage">Send</button>
    	<button id="endConversation">End Conversation</button>
    </div>
</body--->


<body class="">
	<!--///////////////////////////////////////HEADER////////////////////////////////-->

	<div id="a">
		<div role="navigation" class="navbar navbar-default " id="custom-bootstrap-menu">
			<div class="container-fluid">
				<div class="navbar-header"> <img style="height:70px;" alt="Lilac" src="Lilac_files/lilac.png">  <a href="#" class="navbar-brand"></a>
					<button data-target=".navbar-menubuilder" data-toggle="collapse" class="navbar-toggle" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span> </button>
				</div>
				<div class="collapse navbar-collapse navbar-menubuilder">
					<ul class="nav navbar-nav navbar-right">
						<li><a target="_blank" href="https://isec.uta.edu:8060/About">About</a> </li>
						<li><a href="https://isec.uta.edu:8060/Developers">Developers</a> </li>
						<li><a target="_blank" href="https://isec.uta.edu:8060/future_work">Future work</a> </li>
						<li style="display: block;" id="logoutButton"> <a href="javascript:void(0);">Logout</a></li>
					</ul>
				</div>
			</div>
		</div>
		<!--/////////////////////////////////////////////////////////////////////////////////////////////////////-->
		
		<div style="display: none;" class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="enteruname" data-keyboard="false" data-backdrop="static" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">

						<center>
							<h4 class="modal-title" id="enteruname">Enter the Username for Lilac!!</h4> </center>
					</div>
					<div class="modal-body">
						<form>
							<br>

							<div class="form-group">
								<label for="uname" class="control-label">Username:</label>
								<br>
								<br>
								<input class="form-control" placeholder="Enter your username!!" id="username" type="text">
							</div>
						</form>
					</div>
					<div class="modal-footer">

						<button id="usernameButton" type="button" class="btn btn-success">Submit</button>
					</div>
				</div>
			</div>
		</div>


		
	</div>


	<div id="main-container" class="main-container">
			<div style="background-color:transparent;" class="colTwelve" height="100%">
				<div class="colThree">
						<br>
						<br>
						<div class="form-group" style="position:relative">
							<div class="input-group">
								<input placeholder="Search users" id="partner_username" class="form-control" type="search"> 
								<span class="input-group-btn"><button class="btn" id="partnerButton" type="submit" style="border-radius: 0; height: 100%;"><span class="fui-search"> <i style="background-color:transparent;" class="glyphicon glyphicon-search"></i></span></button>
								</span>
							</div>
						</div>
						<div id="users" class="users">							
						</div>
				</div>
				<div class="colNine" height="100%">
					<div style="margin-top:0px; min-height:2.5em; height: 5%; border-bottom-width: 1px;">
  						<div style="vertical-align: middle; height: 2em; display: block; position: relative;" id="chat_header_bar">
	  						<p style="padding-top: 1em;" id="chat_header">Chat with: R</p>
	  						<button style="float: right; border-radius: 0;" class="btn btn-danger" id="endConversation" type="button">End</button>
  						</div>
					</div>
  				<hr style="margin:0;">
					<div class="chat_container">
						<div style="position: relative; overflow: hidden; width: 100%; height: 100%;" class="slimScrollDiv"><div style="overflow: hidden; width: 100%; height: 100%;" class="conversation" id="chat_body">
							<center style="color: gray;">Search for a partner to begin a conversation</center>
						<center style="color:gray">Waiting for R</center><center style="color:gray">Connected to R</center></div><div style="background: none repeat scroll 0% 0% rgb(135, 252, 112); width: 10px; position: absolute; top: 0px; opacity: 0.4; display: none; border-radius: 7px; z-index: 99; right: 1px; height: 289px;" class="slimScrollBar"></div><div style="width: 10px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 7px; background: none repeat scroll 0% 0% rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;" class="slimScrollRail"></div></div>
					</div>
					<div class="typing_container">
						<div style="display: none;" id="typing">R is typing</div>
					</div>
					<table style="display: table;" class="chat_table">
						<tbody>
							<tr>
								<td width="90%">
									<textarea class="form-control" textarea="" role="textbox" aria-multiline="true" autocapitalize="sentences" spellcheck="true" id="chat_input" rows="1" placeholder="Type here..." maxlength="140" autocomplete="on" value="" style="line-height: 1; padding: 6px 0px 0px 6px; border-radius:0;" resize:="" none=""></textarea>
								</td>
								<td width="10%">
									<button disabled="disabled" style="width: 100%; height: 100%; border-radius: 0;" type="button" id="sendMessage" class="btn btn-success">Send</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	


	
	<!--////////////////////////// FOOTER //////////////////////////////-->

	<br>

	<div class="footer element">
		<br>
		<center> © 2014-2015 UT Arlington. All Rights Reserved. </center>
	</div>

	<!--/////////////////////////////////////////////////////////////////////////////////////////////////////-->









</body></html>